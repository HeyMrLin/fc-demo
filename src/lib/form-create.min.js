/*! form-create v1.4 | github https://github.com/xaboy/form-create | author xaboy */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("formCreate",[],t):"object"==typeof exports?exports.formCreate=t():e.formCreate=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=[].concat,o=Object.assign,a=Object.prototype.toString,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Missing parameter";throw new Error(e)},u=function(e){return"[object Date]"===a.call(e)},l=function(e){return"[object Object]"===a.call(e)},c=function(e){return"[object Function]"===a.call(e)},d=function(e){return"[object String]"===a.call(e)},f=function(e){return"[object Boolean]"===a.call(e)},h=Array.isArray,p=function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()},m=function(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)},v=function(e){return h(e)?e:[e]},g=function(e){return h(e)?e[0]||"":e},y=function(e){return"object"===(void 0===e?"undefined":i(e))&&null!==e&&1===e.nodeType&&!l(e)},b=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!1;for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var o=n[r];if((i=h(o))||l(o)){var a=void 0===t[r];i?(i=!1,a&&(t[r]=[])):a&&(t[r]={}),e(t[r],o)}else t[r]=o}return t},k=0,_=function(){return++k},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return e};t.concat=r,t.assign=o,t.toString=a,t.throwIfMissing=s,t.isPlainObject=l,t.isDate=u,t.isFunction=c,t.isString=d,t.isArray=h,t.deepExtend=b,t.isElement=y,t.uniqueId=_,t.dateFormat=w,t.isNumeric=m,t.isBool=f,t.ATS=g,t.TA=v,t.toLine=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=i(r),a=n(4),s=i(a),u=n(0),l=function(e){var t=function(e,t,n){c.call(this,e,t,n)};return t.prototype=Object.create(c.prototype),Object.assign(t.prototype,e),t.prototype.constructor=t,t},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.handler=t,this.options=n,this.vm=e,this.cvm=o.default.instance(e.$createElement),this.event=t.rule.event,this.init()};c.prototype={props:s.default.instance(),init:function(){this.handler.rule=Object.assign(this.handler.rule,{ref:this.handler.refName,key:"fco"+(0,u.uniqueId)()})},parse:function(){var e=this,t=this.handler,n=t.type,i=t.rule,r=t.childrenHandlers;return"__tmp"===i.type?[this.vm.constructor.super.compile(i.template,{}).render.call(i._vm||this.vm)]:[this.cvm.make(n,Object.assign({},i),function(){var t=[];return r.length>0&&(t=r.map(function(t){return e.parse.call(t.render)})),t})]},inputProps:function(){var e=this,t=this.handler,n=t.refName,i=t.unique,r=t.field,o=t.rule.props,a=t.rule.attrs;return this.props.props(Object.assign(o,{model:"cptData."+r,value:this.vm.cptData[r],elementId:i})).attrs(a||{}).ref(n).key("fip"+i).on(this.event).on("input",function(t){e.vm.$emit("input",t),e.vm.$set(e.vm.cptData,r,t)})}},t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e,t){o.call(this,e,t)};return t.prototype=Object.create(o.prototype),Object.assign(t.prototype,e),t.prototype.constructor=t,t},o=function(e,t){var n=t.model,r=t.field,o=t.type,a=t.validate,s=void 0===a?[]:a,u=t.event,l=void 0===u?{}:u,c=t.value,d=void 0===c?"":c,f=t.col,h=void 0===f?{}:f,p=t.emit,m=void 0===p?[]:p,v=t.props,g=void 0===v?{}:v;r=r.toString(),this.type=o,this.model=n,this.value=d,(0,i.isNumeric)(h)?h={span:h}:void 0===h.span&&(h.span=24),g&&void 0===g.hidden&&(g.hidden=!1),g&&void 0===g.visibility&&(g.visibility=!1),t.event=Object.keys(l).reduce(function(e,t){return e[""+t]=l[t],e},{}),m.forEach(function(n){t.event["on-"+n]=function(){for(var t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];e.$emit.apply(e,[(0,i.toLine)(r+"-"+n).replace("_","-")].concat(o))}}),t.validate=(0,i.isArray)(s)?s:[s],(0,i.isArray)(t.options)||(t.options=[]),t.col=h,t.props=g,this.rule=t,this.field=r,this.vm=e,this.unique="fc_"+(0,i.uniqueId)(),this.refName=r+""+this.unique,this.el={},this.init()};o.prototype={init:function(){},toParseValue:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString()},toTrueValue:function(e){return e},setValue:function(e){this.vm.changeTrueData(this.field,e)},getValue:function(){return this.vm.getTrueDataValue(this.field)},setParseValue:function(e){this.setValue(this.toTrueValue(e))},watchTrueValue:function(e){this.vm.changeFormData(this.field,this.toParseValue(e))},mounted:function(){},mounted_:function(){this.el=this.vm.$refs[this.refName],this.mounted()}},t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.iviewConfig=t._init=t.componentCommon=t.getMaker=t.timeStampToDate=t.getGlobalApi=t.formCreateStyle=t.getConfig=t.getComponent=void 0;var r=n(0),o=n(2),a=i(o),s=n(1),u=i(s),l=n(7),c=i(l),d=n(26),f=i(d),h=function(){var e={_v:2,resetBtnType:"ghost",resetBtnIcon:"refresh",submitBtnIcon:"ios-upload",fileIcon:"document-text",fileUpIcon:"folder",imgUpIcon:"camera"},t={_v:3,resetBtnType:"default",resetBtnIcon:"md-refresh",submitBtnIcon:"ios-share",fileIcon:"md-document",fileUpIcon:"ios-folder-open",imgUpIcon:"md-images"};return"undefined"==typeof iview?e:iview.version&&3==iview.version.split(".")[0]?t:e}(),p=function(e,t,n){var i=t.type.toLowerCase(),r=void 0===c.default[i]?m():c.default[i],o=new r.handler(e,t);return o.render=new r.render(e,o,n),o.noValue=r.noValue,o},m=function(){return{handler:(0,a.default)({}),render:(0,u.default)({}),noValue:!0}},v=function(){return{el:null,form:{inline:!1,labelPosition:"right",labelWidth:"",showMessage:!0,autocomplete:"off"},row:{gutter:0,type:void 0,align:"middle",justify:void 0,className:void 0},upload:{beforeUpload:function(){},onProgress:function(e,t,n){},onSuccess:function(e,t,n){},onError:function(e,t,n){},onPreview:function(e){},onRemove:function(e,t){},onFormatError:function(e,t){},onExceededSize:function(e,t){},handleIcon:"ios-eye-outline",allowRemove:!0},onSubmit:function(e){},submitBtn:{type:"primary",size:"large",shape:void 0,long:!0,htmlType:"button",disabled:!1,icon:h.submitBtnIcon,innerText:"提交",loading:!1,show:!0},resetBtn:{type:h.resetBtnType,size:"large",shape:void 0,long:!0,htmlType:"button",disabled:!1,icon:h.resetBtnIcon,innerText:"重置",loading:!1,show:!1},mounted:function(){}}},g=function(e){var t=e.vm;return{formData:function(){var t={};return e.fields().map(function(n){n=n.toString(),t[n]=e.handlers[n].getValue()}),t},getValue:function(t){t=t.toString();var n=e.handlers[t];if(void 0!==n)return n.getValue();console.error(t+" 字段不存在!")},changeField:function(n,i){n=n.toString();var o=e.handlers[n];void 0===o?console.error(n+" 字段不存在!"):(0,r.isFunction)(i)?i(t.getTrueData(n),function(e){o.setValue(e)}):o.setValue(i)},removeField:function(t){e.removeField(t.toString())},validate:function(t,n){e.getFormRef().validate(function(e){!0===e?t&&t():n&&n()})},validateField:function(t,n){e.getFormRef().validateField(t.toString(),n)},resetFields:function(){e.getFormRef().resetFields(),t.$nextTick(function(){e.getFormRef().resetFields()})},destroy:function(){t.$el.parentNode.removeChild(t.$el),t.$destroy()},fields:function(){return e.fields()},append:function(t,n){e.append(t,n,!1)},prepend:function(t,n){e.append(t,n,!0)},submit:function(t){var n=this;this.validate(function(){var i=n.formData();(0,r.isFunction)(t)?t(i):e.options.onSubmit&&e.options.onSubmit(i)})},hidden:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e.vm;t?(0,r.isArray)(t)||(t=[t]):t=this.fields(),t.forEach(function(e){i.$set(i.trueData[e].rule.props,"hidden",!!n)})},visibility:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e.vm;t?(0,r.isArray)(t)||(t=[t]):t=this.fields(),t.forEach(function(e){i.$set(i.trueData[e].rule.props,"visibility",!!n)})},model:function(t){var n={};return t?(0,r.isArray)(t)||(t=[t]):t=this.fields(),t.forEach(function(t){var i=e.handlers[t];if(!i)throw new Error(t+"字段不存在");i.model=function(e){n[t]=e},i.model(i.vm.getTrueData(t))}),n},bind:function(t){var n={},i=e.vm;return t?(0,r.isArray)(t)||(t=[t]):t=this.fields(),t.forEach(function(e){n[e]=i.trueData[e].value,Object.defineProperty(n,e,{get:function(){return i.trueData[e].value},set:function(t){i.$set(i.trueData[e],"value",t)},enumerable:!0,configurable:!0})}),n},submitStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,r.deepExtend)(Object.create(null),e);t.changeButtonProps(n)},resetStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,r.deepExtend)(Object.create(null),e);t.changeResetProps(n)},btn:{loading:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.changeButtonProps({loading:e})},finish:function(){this.loading(!1)},disabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.changeButtonProps({disabled:e})}},resetBtn:{loading:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.changeResetProps({loading:e})},finish:function(){this.loading(!1)},disabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.changeResetProps({disabled:e})}},closeModal:function(){t.$Modal.remove()},set:function(e,n,i){t.$set(e,n,i)},reload:function(t){e.reload(t)}}},y=function(e){if((0,r.isDate)(e))return e;var t=new Date(e);return"Invalid Date"===t.toString()?e:t},b=function(){return f.default},k={data:function(){return{rules:{},cptData:{},buttonProps:{},resetProps:{},trueData:{},jsonData:{},$f:{},isShow:!0,watchs:[]}},methods:{changeFormData:function(e,t){this.$set(this.cptData,e,t)},changeTrueData:function(e,t){this.$set(this.trueData[e],"value",t)},getTrueDataValue:function(e){return this.trueData[e].value},getTrueData:function(e){return this.trueData[e]},getFormData:function(e){return this.cptData[e]},removeFormData:function(e){this.$delete(this.cptData,e),this.$delete(this.trueData,e),this.$delete(this.jsonData,e)},changeButtonProps:function(e){this.$set(this,"buttonProps",Object.assign(this.buttonProps,e))},changeResetProps:function(e){this.$set(this,"resetProps",Object.assign(this.resetProps,e))},setField:function(e){this.$set(this.cptData,e,""),this.$set(this.trueData,e,{})},init:function(){var e=this,t=this.fComponent._type;this[t].forEach(function(n,i){var r=e.$watch(t+"."+i+".value",function(t){if(void 0===e.trueData[n.field])return r();e.$set(e.trueData[n.field],"value",t)});e.watchs.push(r)}),this.$watch(t,function(t){e.fComponent.reload(t)})},unWatch:function(){this.watchs.forEach(function(e){return e()}),this.watchs=[]}}},_=function(){Object.assign||(Object.assign=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}})};t.getComponent=p,t.getConfig=v,t.formCreateStyle=".form-create{padding:25px;} .fc-upload-btn,.fc-files{display: inline-block;width: 58px;height: 58px;text-align: center;line-height: 58px;border: 1px solid transparent;border-radius: 4px;overflow: hidden;background: #fff;position: relative;box-shadow: 0 1px 1px rgba(0,0,0,.2);margin-right: 4px;box-sizing: border-box;} .fc-files>.ivu-icon{vertical-align: middle;}.fc-files img{width:100%;height:100%;display:inline-block;vertical-align: top;}.fc-upload .ivu-upload{display: inline-block;}.fc-upload-btn{border: 1px dashed #dddee1;}.el-date-editor.el-input{width:100%}.el-radio{display:block}.el-select{width:100%}.el-radio__label,.el-checkbox__label{line-height: 36px}.el-radio .el-input,.el-checkbox .el-input{width: auto}.el-radio .el-input .el-input__inner,.el-checkbox .el-input .el-input__inner{height: 30px}.el-radio+.el-radio{margin-left:0;margin-top:6px}.fc-upload .fc-upload-cover{ display: none; position: absolute; top: 0; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,.6); }.fc-upload .fc-upload-cover i{ color: #fff; font-size: 20px; cursor: pointer; margin: 0 2px; }.fc-files:hover .fc-upload-cover{ display: block; }.fc-upload .ivu-upload-list-file{ display: inline-block;float: left; }.fc-upload .ivu-upload-list{ position: absolute;left: 0; }.fc-spin-icon-load{animation: ani-fc-spin 1s linear infinite;} @-webkit-keyframes ani-fc-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes ani-fc-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",t.getGlobalApi=g,t.timeStampToDate=y,t.getMaker=b,t.componentCommon=k,t._init=_,t.iviewConfig=h},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){this._data=this._initData(),this._prev=null},a=null;o.instance=function(){return!1==a instanceof o&&(a=new o),a},o.prototype={_initData:function(){return{class:{},style:{},attrs:{},props:{},domProps:{},on:{},nativeOn:{},directives:[],scopedSlots:{},slot:void 0,key:void 0,ref:void 0}},class:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.throwIfMissing)("缺少参数:classList"),n=arguments[1];return(0,r.isArray)(t)?t.map(function(t){e._data.class[t.toString()]=!0}):(0,r.isPlainObject)(t)?this._data.class=(0,r.assign)({},this._data.class,t):this._data.class[t.toString()]=void 0===n||n,this},directives:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.throwIfMissing)("缺少参数:directives");return this._data.directives=r.concat.call.apply(r.concat,i(this._data.directives).concat(i(e))),this},init:function(){this._data=this._initData()},get:function(){return this._prev=this._data,this.init(),this._prev},getPrev:function(){return this._prev}};var s=["ref","key","slot"],u=["scopedSlots","nativeOn","on","domProps","props","attrs","style"];s.forEach(function(e){o.prototype[e]=function(t){return this._data[e]=t,this}}),u.forEach(function(e){o.prototype[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.throwIfMissing)("缺少参数:"+e),n=arguments[1];return(0,r.isPlainObject)(t)?this._data[e]=(0,r.assign)(this._data[e],t):this._data[e][t.toString()]=n,this}}),t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(3),a=n(28),s=i(a),u=n(29),l=i(u),c=n(9),d=n(1),f=(i(d),(0,o.getMaker)());(0,o._init)();var h=function e(t,n){!this instanceof e&&throwIfMissing("formCreate is a constructor and should be called with the `new` keyword"),(0,r.isBool)(n.sumbitBtn)&&(n.sumbitBtn={show:n.sumbitBtn}),(0,r.isBool)(n.resetBtn)&&(n.resetBtn={show:n.resetBtn});var i=(0,r.deepExtend)((0,o.getConfig)(),n);i.el=i.el?(0,r.isElement)(i.el)?i.el:document.querySelector(i.el):window.document.body,this.options=i,this.initCreate(t)};h.maker=f,h.version="1.4.6";var p=function(){if(null===document.getElementById("form-create-style")){var e=document.createElement("style");e.id="form-create-style",e.innerText=o.formCreateStyle,document.getElementsByTagName("head")[0].appendChild(e)}};h.create=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.Vue,i=(0,r.isElement)(t)?{el:t}:t,o=new h(e,i);o.create(n);return o.fCreateApi},h.install=function(e){p(),e.prototype.$formCreate=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h.create(t,n,e)},e.prototype.$formCreate.version="1.4.6",e.prototype.$formCreate.maker=f,e.component(c.formCreateName,(0,c.$FormCreate)())},h.prototype={setHandler:function(e){var t=e.rule,n=e.field;this.handlers[n]=e,!0!==e.noValue&&(this.formData[n]=e.toParseValue(e.value),this.validate[n]=t.validate,this.trueData[n]={value:e.toTrueValue(this.formData[n]),rule:e.rule})},notField:function(e){return-1===this.fieldList.indexOf(e)},createHandler:function(){var e=this;this.rules.filter(function(e){return void 0!==e.type||void 0!==e.field}).forEach(function(t){if(t.field=void 0===t.field?"":t.field,e.notField(t.field.toString())){var n=(0,o.getComponent)(e.vm,t,e.options);e.createChildren(n),e.setHandler(n),e.fieldList.push(n.field)}else console.error(t.field+" 字段已存在")})},createChildren:function(e){var t=this;e.childrenHandlers=[],(0,r.isArray)(e.rule.children)&&e.rule.children.length>0&&e.rule.children.map(function(n){if((0,r.isFunction)(n.getRule)&&(n=n.getRule()),n.field=void 0===n.field?"":n.field,t.notField(n.field.toString())){var i=(0,o.getComponent)(t.vm,n,t.options);t.createChildren(i),e.childrenHandlers.push(i)}else console.error(n.field+" 字段已存在")})},initCreate:function(e){var t=this;this.rules=Array.isArray(e)?e:[],this.handlers={},this.fRender={},this.formData={},this.validate={},this.trueData={},this.fieldList=[],this.rules.forEach(function(e,n){(0,r.isFunction)(e.getRule)&&(t.rules[n]=e.getRule())})},init:function(e){this.vm=e,this.createHandler(),this.fCreateApi=(0,o.getGlobalApi)(this),e.$set(e,"cptData",this.formData),e.$set(e,"trueData",this.trueData),e.$set(e,"buttonProps",this.options.submitBtn),e.$set(e,"resetProps",this.options.resetBtn),e.$set(e,"rules",this.rules),this.fRender=new s.default(this)},create:function(e){var t=e.extend(this.component()),n=(new t).$mount();return this.options.el.appendChild(n.$el),n},mounted:function(e){var t=this;this.vm=e,e.$nextTick(function(){Object.keys(e.cptData).map(function(n){var i=t.handlers[n];i.model&&i.model(e.getTrueData(n)),t.addHandlerWatch(i),i.mounted_()}),t.options.mounted&&t.options.mounted()})},component:function(){return(0,l.default)(this)},append:function(e,t,n){if((0,r.isFunction)(e.getRule)&&(e=e.getRule()),-1!==Object.keys(this.handlers).indexOf(e.field.toString()))throw new Error(e.field+"字段已存在");var i=(0,o.getComponent)(this.vm,e,this.options);this.createChildren(i),this.vm.setField(i.field),this.fRender.setRender(i,t||"",n),this.setHandler(i),this.addHandlerWatch(i),this.vm.$nextTick(function(){i.mounted_()})},removeField:function(e){if(void 0===this.handlers[e])throw new Error(e+"字段不存在");this.handlers[e].watch&&this.handlers[e].watch.forEach(function(e){return e()}),this.vm.removeFormData(e),delete this.handlers[e],delete this.validate[e],this.fRender.removeRender(e),delete this.formData[e],delete this.trueData[e]},addHandlerWatch:function(e){var t=this;if(!0!==e.noValue){var n=e.field,i=this.vm.$watch("cptData."+n,function(r,o){void 0!==t.handlers[n]?e.setParseValue(r):i()},{deep:!0}),r=this.vm.$watch("trueData."+n+".value",function(i,o){if(void 0!==i)if(void 0!==t.handlers[n]){var a=JSON.stringify(i);t.vm.jsonData[n]!==a&&(t.vm.jsonData[n]=a,e.model&&e.model(t.vm.getTrueData(n)),e.watchTrueValue(i),e.rule.value=i)}else r()},{deep:!0});e.watch=[i,r]}},reload:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rules;this.vm.unWatch(),Object.keys(this.handlers).forEach(function(t){return e.removeField(t)}),this.vm.isShow=!1,this.initCreate(t),this.init(this.vm),this.fRender.parse(this.vm),this.vm.init(),this.vm.$nextTick(function(){e.vm.isShow=!0,setTimeout(function(){return e.mounted(e.vm)})})},getFormRef:function(){return this.vm.$refs[this.fRender.refName]},fields:function(){return Object.keys(this.formData)}},t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.throwIfMissing)("缺少参数:createElement");this.$h=e},o=null,a=null;r.instance=function(e){return!1==o instanceof r&&(o=new r(e)),o},r.setVm=function(e){a=e},r.clearVm=function(){a=null},r.prototype={make:function(e,t,n){(0,i.isString)(t)&&(t={domProps:{innerHTML:t}});var r=this.$h(e,t,this.getVNode(n));return null!==a&&(r.context=a),r},getVNode:function(e){return(0,i.isFunction)(e)?e():e||[]}};var s={modal:"Modal",progress:"el-progress",button:"el-button",icon:"i",span:"span",slider:"el-slider",rate:"el-rate",upload:"el-upload",cascader:"el-cascader",colorPicker:"el-color-picker",timePicker:"el-time-select",datePicker:"el-date-picker",switch:"el-switch",option:"el-option",select:"el-select",checkbox:"el-checkbox",checkboxGroup:"el-checkbox-group",radio:"el-radio",radioGroup:"el-radio-group",inputNumber:"el-input-number",input:"el-input",formItem:"el-form-item",form:"el-form",col:"el-col",row:"el-row",tree:"el-tree"};Object.keys(s).forEach(function(e){r.prototype[e]=function(t,n){return this.make(s[e],t,n)}}),t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=i(r),a=n(12),s=i(a),u=n(13),l=i(u),c=n(14),d=i(c),f=n(15),h=i(f),p=n(16),m=i(p),v=n(17),g=i(v),y=n(18),b=i(y),k=n(19),_=i(k),w=n(20),O=i(w),P=n(8),D=i(P),V=n(21),j=i(V),x=n(22),M=i(x),S=n(23),C=i(S),I=n(24),T=i(I),F=n(25),$=i(F),A={hidden:o.default,input:s.default,radio:l.default,checkbox:d.default,switch:h.default,select:m.default,datepicker:g.default,timepicker:b.default,inputnumber:_.default,colorpicker:O.default,upload:D.default,cascader:j.default,rate:M.default,slider:C.default,frame:T.default,tree:$.default};t.default=A},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=i(o),s=n(1),u=i(s),l=n(0),c=n(3),d=(0,a.default)({init:function(){var e=this.rule.props;e.defaultFileList=[],e.showUploadList=!1,e.uploadType=e.uploadType?e.uploadType:"file","file"===e.uploadType&&void 0===e.handleIcon&&(e.handleIcon=!1),this.parseValue=[]},toParseValue:function(e){var t=this,n=(0,l.isArray)(e)?e:e?[e]:[];return this.parseValue.splice(0,this.parseValue.length),n.forEach(function(e){return t.push(e)}),this.rule.props.defaultFileList=this.parseValue,this.parseValue},mounted:function(){this.changeParseValue(this.parseValue)},push:function(e){this.parseValue.push({url:e,name:this.getFileName(e)})},toTrueValue:function(e){if(!e)return[];var t=e.map(function(e){return e.url}).filter(function(e){return void 0!==e});return this.rule.props.maxLength<=1?t[0]||"":t},changeParseValue:function(e){this.parseValue=e,this.vm.changeFormData(this.field,e),this.vm.getTrueData(this.field).rule.props.defaultFileList=e},watchTrueValue:function(e){var t=!0;this.rule.props.defaultFileList.forEach(function(e){t=t&&(void 0===e.percentage||"finished"===e.status)}),t&&this.vm.changeFormData(this.field,this.toParseValue(e))},getFileName:function(e){var t=String(e).split("/"),n=t[t.length-1],i=n.indexOf(".");return-1===i?n:n.substr(0,i)}}),f=(0,u.default)({init:function(){var e=this,t=this.handler;this.uploadOptions=Object.assign(Object.create(null),this.options.upload,t.rule.props),this.issetIcon=this.uploadOptions.allowRemove||this.uploadOptions.handleIcon,this.propsData=this.props.props(this.uploadOptions).props("onSuccess",function(n,i,r){var o=e.uploadOptions.onSuccess.call(null,n,i,r);o&&(r.push({url:o,name:t.getFileName(o)}),e.handler.changeParseValue(e.handler.el.fileList))}).ref(t.refName).key("fip"+t.unique).get()},defaultOnHandle:function(e){var t=this;this.vm.$Modal.remove(),setTimeout(function(){t.vm.$Modal.info({title:"预览",render:function(t){return t("img",{attrs:{src:e},style:"width: 100%",key:"ifmd"+(0,l.uniqueId)()})},showCancel:!0,closable:!0,scrollable:!0})},301)},onHandle:function(e){var t=this.uploadOptions.onHandle;if(t)return t(e);this.defaultOnHandle(e)},parse:function(){var e=this,t=this.handler,n=t.rule,i=t.unique;this.uploadOptions=Object.assign(Object.create(null),this.options.upload,n.props),!0===this.uploadOptions.handleIcon&&(this.uploadOptions.handleIcon="ios-eye-outline");var o=this.vm.cptData[this.handler.field],a=[].concat(r(o.map(function(t,n){return void 0===t.status||"finished"===t.status?e.makeUploadView(t.url,""+n+i,n):t.showProgress?e.makeProgress(t,""+n+i):void 0})));return a.push(this.makeUploadBtn(i,!this.uploadOptions.maxLength||this.uploadOptions.maxLength>this.vm.cptData[this.handler.field].length)),[this.cvm.make("div",{key:"div4"+i,class:{"fc-upload":!0}},a)]},makeUploadView:function(e,t,n){var i=this;return this.cvm.make("div",{key:"div1"+t,class:{"fc-files":!0}},function(){var r=[];return"image"===i.handler.rule.props.uploadType?r.push(i.cvm.make("img",{key:"img"+t,attrs:{src:e}})):r.push(i.cvm.icon({key:"file"+t,props:{type:c.iviewConfig.fileIcon,size:40}})),i.issetIcon&&r.push(i.makeIcons(e,t,n)),r})},makeIcons:function(e,t,n){var i=this;return this.cvm.make("div",{key:"div2"+t,class:{"fc-upload-cover":!0}},function(){var r=[];return i.uploadOptions.handleIcon&&r.push(i.makeHandleIcon(e,t,n)),!0===i.uploadOptions.allowRemove&&r.push(i.makeRemoveIcon(e,t,n)),r})},makeProgress:function(e,t){return this.cvm.make("div",{key:"div3"+t,class:{"fc-files":!0}},[this.cvm.progress({key:"upp"+t,props:{percent:e.percentage,hideInfo:!0}})])},makeUploadBtn:function(e,t){return this.cvm.upload(this.propsData,!0===t?[this.cvm.make("div",{key:"div5"+e,class:{"fc-upload-btn":!0}},[this.cvm.icon({key:"upi"+e,props:{type:"file"===this.handler.rule.props.uploadType?c.iviewConfig.fileUpIcon:c.iviewConfig.imgUpIcon,size:20}})])]:[])},makeRemoveIcon:function(e,t,n){var i=this;return this.cvm.icon({key:"upri"+t+n,props:{type:"ios-trash-outline"},nativeOn:{click:function(){i.handler.el.fileList.splice(n,1),i.handler.changeParseValue(i.handler.el.fileList),i.propsData.props.onRemove&&i.propsData.props.onRemove(i.handler.el.fileList)}}})},makeHandleIcon:function(e,t,n){var i=this;return this.cvm.icon({key:"uphi"+t+n,props:{type:this.uploadOptions.handleIcon.toString()},nativeOn:{click:function(){i.onHandle(e)}}})}});t.default={handler:d,render:f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formCreateName=t.$FormCreate=void 0;var i=n(5),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(3),a=function(){return{name:"FormCreate",render:function(){return this.fComponent.fRender.parse(this.fComponent.vm)},props:{rule:{type:Array,required:!0,default:[]},option:{type:Object,default:function(){return{}},required:!1},value:Object},data:o.componentCommon.data,methods:o.componentCommon.methods,created:function(){this.fComponent=new r.default(this.rule,this.option),this.fComponent._type="rule",this.fComponent.init(this)},mounted:function(){this.fComponent.mounted(this),this.$f=this.fComponent.fCreateApi,this.init()}}};t.$FormCreate=a,t.formCreateName="FormCreate"},function(e,t,n){"use strict";var i=n(5),r=function(e){return e&&e.__esModule?e:{default:e}}(i);"undefined"!=typeof window&&window.Vue&&window.Vue.use(r.default),e.exports.default=e.exports=r.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=(0,o.default)({init:function(){this.rule.props={}}}),l=(0,s.default)({parse:function(){return[]}});t.default={handler:u,render:l}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=(0,o.default)({init:function(){var e=this.rule.props;e.autosize&&e.autosize.minRows&&(e.rows=e.autosize.minRows||2)}}),l=(0,s.default)({parse:function(){return[this.cvm.input(this.inputProps().get())]}});t.default={handler:u,render:l}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=(0,o.default)({toParseValue:function(e){return this.rule.options.filter(function(t){return t.value===e}).reduce(function(e,t){return t.label},"")},toTrueValue:function(e){return this.rule.options.filter(function(t){return t.label===e}).reduce(function(e,t){return t.value},"")}}),l=(0,s.default)({parse:function(){var e=this,t=this.handler,n=t.unique,i=t.rule.options;return[this.cvm.radioGroup(this.inputProps().get(),function(){return i.map(function(t,i){return e.cvm.radio({props:t,key:"ropt"+i+n})})})]}});t.default={handler:u,render:l}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=n(0),l=(0,o.default)({toParseValue:function(e){return e?(0,u.isArray)(e)||(e=[e]):e=[],this.rule.options.filter(function(t){return-1!==e.indexOf(t.value)}).map(function(e){return e.label})},toTrueValue:function(e){var t=this.rule.options.filter(function(t){return-1!==e.indexOf(t.label)}).map(function(e){return e.value});return 1===this.rule.options.length?void 0===t[0]?"":t[0]:t}}),c=(0,s.default)({parse:function(){var e=this,t=this.handler,n=t.unique,i=t.rule.options;return[this.cvm.checkboxGroup(this.inputProps().get(),function(){return i.map(function(t,i){return e.cvm.checkbox({props:t,key:"copt"+i+n})})})]}});t.default={handler:l,render:c}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=(0,o.default)({init:function(){void 0===this.rule.slot&&(this.rule.slot={})}}),l=(0,s.default)({parse:function(){var e=this.handler.rule.slot;return this.propsData=this.inputProps().scopedSlots({open:function(){return e.open},close:function(){return e.close}}).get(),[this.cvm.switch(this.propsData)]}});t.default={handler:u,render:l}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=n(0),l=(0,o.default)({toParseValue:function(e){var t=(0,u.isArray)(e);return!0===this.rule.props.multiple?Array.from(!0===t?e:[e]):!0===t?e[0]||"":e},toTrueValue:function(e){return(0,u.isArray)(e)?Array.from(e):e}}),c=(0,s.default)({parse:function(){var e=this,t=this.handler,n=t.unique,i=t.rule.options;return[this.cvm.select(this.inputProps().get(),function(){return i.map(function(t,i){return e.cvm.option({props:t,key:"sopt"+i+n})})})]}});t.default={handler:l,render:c}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=n(0),l=n(3),c=(0,o.default)({init:function(){var e=this.rule.props;e.type=e.type?e.type:"date",void 0===e.startDate&&(e.startDate=(0,l.timeStampToDate)(e.startDate))},toParseValue:function(e){var t=(0,u.isArray)(e),n=this.rule.props,i=void 0;return-1!==["daterange","datetimerange"].indexOf(n.type)?i=t?e.map(function(e){return e?(0,l.timeStampToDate)(e):""}):["",""]:"date"===n.type&&!0===n.multiple?i=e.toString():(i=t?e[0]||"":e,i=i?(0,l.timeStampToDate)(i):""),i},toTrueValue:function(){return void 0===this.el.publicStringValue?this.value:this.el.publicStringValue},mounted:function(){this.vm.changeTrueData(this.field,this.el.publicStringValue)}}),d=(0,s.default)({parse:function(){return[this.cvm.datePicker(this.inputProps().get())]}});t.default={handler:c,render:d}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=n(0),l=n(3),c=(0,o.default)({init:function(){var e=this.rule.props;e.type||(e.type="time"),void 0===e.confirm&&(e.confirm=!0)},toParseValue:function(e){var t=this,n=void 0,i=(0,u.isArray)(e);return"timerange"===this.rule.props.type?n=i?e.map(function(e){return e?t.getTime((0,l.timeStampToDate)(e)):""}):["",""]:(i&&(e=e[0]),n=e?this.getTime((0,l.timeStampToDate)(e)):""),n},toTrueValue:function(){return void 0===this.el.publicStringValue?this.value:this.el.publicStringValue},getTime:function(e){return(0,u.isDate)(e)?(0,u.dateFormat)("hh:mm:ss",e):e},mounted:function(){this.vm.changeTrueData(this.field,this.el.publicStringValue)}}),d=(0,s.default)({parse:function(){return[this.cvm.timePicker(this.inputProps().get())]}});t.default={handler:c,render:d}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=(0,o.default)({toParseValue:function(e){var t=parseFloat(e);return Number.isNaN(t)&&(t=0),t}}),l=(0,s.default)({parse:function(){return[this.cvm.inputNumber(this.inputProps().get())]}});t.default={handler:u,render:l}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=(0,o.default)({}),l=(0,s.default)({parse:function(){return[this.cvm.colorPicker(this.inputProps().get())]}});t.default={handler:u,render:l}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=n(0),l=(0,o.default)({init:function(){var e=this.rule;e.props.options||(e.props.options=[]),(0,u.isArray)(this.value)||(this.value=[]),Object.freeze(e.props.data)},toParseValue:function(e){return(0,u.isArray)(e)?e:[]},mounted:function(){this.vm.changeTrueData(this.field,this.el.value)}}),c=(0,s.default)({parse:function(){return[this.cvm.cascader(this.inputProps().get())]}});t.default={handler:l,render:c}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=(0,o.default)({toParseValue:function(e){var t=parseFloat(e);return Number.isNaN(t)&&(t=0),t}}),l=(0,s.default)({parse:function(){return[this.cvm.rate(this.inputProps().get())]}});t.default={handler:u,render:l}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=n(0),l=(0,o.default)({init:function(){this.rule.props.min=void 0===this.rule.props.min?0:parseFloat(this.rule.props.min)||0,this.rule.value&&(this.rule.value=0)},toParseValue:function(e){var t=(0,u.isArray)(e),n=this.rule.props,i=n.min;return!0===n.range?t?e:[i,parseFloat(e)||i]:t?parseFloat(e[0])||i:parseFloat(e)}}),c=(0,s.default)({parse:function(){return[this.cvm.slider(this.inputProps().get())]}});t.default={handler:l,render:c}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=i(r),a=n(1),s=i(a),u=n(0),l=n(8),c=i(l),d=n(3),f=(0,o.default)({init:function(){var e=this.rule.props;e.type||(e.type="input"),e.icon||(e.icon=d.iviewConfig.fileUpIcon),e.width||(e.width="500px"),e.height||(e.height="370px"),void 0===e.spin&&(e.spin=!0),e.title||(e.title="请选择"+this.rule.title),e.maxLength||(e.maxLength=0),e.multiple="1"!==e.maxLength.toString(),"file"===e.type&&void 0===e.handleIcon?e.handleIcon=!1:e.handleIcon=!0===e.handleIcon||void 0===e.handleIcon?"ios-eye-outline":e.handleIcon,void 0===e.allowRemove&&(e.allowRemove=!0)},toParseValue:function(e){var t=void 0,n=e,i=(0,u.isArray)(n);return t=""===n?[]:i?n:[n],this.parseValue=t,t},toTrueValue:function(e){return!0===this.rule.props.multiple?e:void 0===e[0]?"":e[0]}}),h={onOpen:"on-open",onChange:"on-change",onCancel:"on-cancel",onOk:"on-ok"},p=(0,s.default)({init:function(){var e=this,t=this.handler.field,n=!1;this.vm.$watch("cptData."+t,function(){!0===n&&e.onChange(),n=!0}),this._props=this.handler.rule.props,this.issetIcon=!1!==this._props.handleIcon||!0===this._props.allowRemove},parse:function(){var e=this._props.type;return"image"===e?this.makeGroup(this.makeImage()):"file"===e?this.makeGroup(this.makeFile()):this.makeInput()},makeInput:function(e){var t=this,n=this.handler.unique,i=this.inputProps().props({type:"text",value:this.handler.parseValue.toString(),icon:this._props.icon,readonly:!0,clearable:!0}).on("on-click",function(){t.showModel()}).key("ifit"+n).style({display:!0===e?"none":"inline-block"}).get();return[this.cvm.input(i)]},makeGroup:function(e){var t=this.handler.unique,n=this.handler.field;return[this.cvm.make("div",{key:"ifgp1"+t,class:{"fc-upload fc-frame":!0},ref:this.handler.refName,props:{value:this.vm.cptData[n]}},e),this.makeInput(!0)]},makeImage:function(){var e=this,t=this.handler.unique,n=this.handler.parseValue.map(function(n,i){return e.cvm.make("div",{key:"ifid1"+t+i,class:{"fc-files":!0}},[e.cvm.make("img",{key:"ifim"+t+i,attrs:{src:n}}),e.makeIcons(n,t,i)])});return n.push(this.makeBtn()),n},makeFile:function(){var e=this,t=this.handler.unique,n=this.handler.parseValue.map(function(n,i){return e.cvm.make("div",{key:"iffd2"+t+i,class:{"fc-files":!0}},[e.cvm.icon({key:"iff"+t+i,props:{type:d.iviewConfig.fileIcon,size:40}}),e.makeIcons(n,t,i)])});return n.push(this.makeBtn()),n},makeBtn:function(){var e=this,t=this.handler.rule.props;if(!(t.maxLength>0&&this.handler.parseValue.length>=t.maxLength)){var n=this.handler.unique;return this.cvm.make("div",{key:"ifbd3"+n,class:{"fc-upload-btn":!0},on:{click:function(){e.showModel()}}},[this.cvm.icon({key:"ifbi"+n,props:{type:this._props.icon,size:20}})])}},makeSpin:function(){if(!0===this._props.spin){var e=this.handler.unique;return this.cvm.make("Spin",{props:{fix:!0},key:"ifsp"+e,class:{"fc-spin":!0}},[this.cvm.icon({props:{type:"load-c",size:18},class:{"fc-spin-icon-load":!0},key:"ifspi"+e}),this.cvm.make("div",{domProps:{innerHTML:"加载中..."},key:"ifspd"+e})])}},makeIcons:function(e,t,n){var i=this;if(!0===this.issetIcon)return this.cvm.make("div",{key:"ifis"+t+n,class:{"fc-upload-cover":!0}},function(){var r=[];return!1!==i._props.handleIcon&&r.push(i.makeHandleIcon(e,t,n)),!0===i._props.allowRemove&&r.push(i.makeRemoveIcon(e,t,n)),r})},makeRemoveIcon:function(e,t,n){var i=this;return this.cvm.icon({key:"ifri"+t+n,props:{type:"ios-trash-outline"},nativeOn:{click:function(){!1!==i.onRemove(e)&&i.handler.parseValue.splice(n,1)}}})},makeHandleIcon:function(e,t,n){var i=this,r=this._props;return this.cvm.icon({key:"ifhi"+t+n,props:{type:r.handleIcon.toString()},nativeOn:{click:function(){i.onHandle(e)}}})},onRemove:function(e){var t=this.handler.rule.event["on-remove"];if(t)return t(e,this.handler.getValue())},onHandle:function(e){var t=this.handler.rule.event["on-handle"];if(t)return t(e);this.defaultOnHandle(e)},showModel:function(){var e=this,t=!1!==this.onOpen(),n=this._props,i=n.width,r=n.height,o=n.src,a=n.title;t&&(this.vm.$Modal.remove(),setTimeout(function(){e.vm.$Modal.confirm({title:a,render:function(){return[e.makeSpin(),e.cvm.make("iframe",{attrs:{src:o},style:{height:r,border:"0 none",width:"100%"},on:{load:function(){if(!0===e._props.spin){var t=document.getElementsByClassName("fc-spin")[0];t&&t.parentNode.removeChild(t)}}},key:"ifmd"+(0,u.uniqueId)()})]},onOk:function(){return e.onOk()},onCancel:function(){return e.onCancel()},showCancel:!0,closable:!0,scrollable:!0,width:i})},301))}});p.prototype.defaultOnHandle=c.default.render.prototype.defaultOnHandle,Object.keys(h).forEach(function(e){p.prototype[e]=function(){var t=this.handler.rule.event[h[e]];if(t)return t(this.handler.getValue())}}),t.default={handler:f,render:p}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=i(o),s=n(1),u=i(s),l=n(0),c=(0,a.default)({init:function(){var e=this,t=this.rule.props;void 0===t.data&&(t.data=[]),void 0===t.type&&(t.type="checked"),void 0===t.multiple&&(t.multiple=!1),this.isMultiple()&&(0,l.isArray)(this.value)&&(this.value=this.value[0]||""),this._data={},this.data(t.data),(0,l.TA)(this.value).forEach("selected"===this.rule.props.type?function(t){return e.selected(t)}:function(t){return e.checked(t)}),this.value=[],"selected"===t.type?Object.keys(this._data).forEach(function(t){var n=e._data[t];!0===n.selected&&e.value.push(n.id)}):Object.keys(this._data).forEach(function(t){var n=e._data[t];!0===n.checked&&e.value.push(n.id)})},toParseValue:function(e){return e=[].concat(r(new Set((0,l.TA)(e)))),this.choose(e),this.parseValue=e,e},choose:function(e){var t=this,n=this.rule,i=this._data;"selected"===n.props.type?Object.keys(i).forEach(function(n){t.vm.$set(i[n],"selected",-1!==e.indexOf(i[n].id))}):Object.keys(i).forEach(function(n){t.vm.$set(i[n],"checked",-1!==e.indexOf(i[n].id))})},checked:function(e){void 0!==this._data[e]&&this.vm.$set(this._data[e],"checked",!0)},selected:function(e){void 0!==this._data[e]&&this.vm.$set(this._data[e],"selected",!0)},isMultiple:function(){return!this.rule.props.multiple&&"selected"===this.rule.props.type},toTrueValue:function(e){var t=e;return this.isMultiple()?t[0]||"":t},selectedNodeToValue:function(e){var t=[];return e.forEach(function(e){!0===e.selected&&t.push(e.id)}),t},checkedNodeToValue:function(e){var t=[];return e.forEach(function(e){!0===e.checked&&t.push(e.id)}),t},toValue:function(){return"selected"===this.rule.props.type?this.selectedNodeToValue(this.el.getSelectedNodes()):this.checkedNodeToValue(this.el.getCheckedNodes())},data:function(e){var t=this;e.forEach(function(e){t._data[e.id]=e,void 0!==e.children&&(0,l.isArray)(e.children)&&t.data(e.children)})}}),d=(0,u.default)({parse:function(){var e=this,t=this.handler,n=t.rule,i=t.refName,r=t.field,o=t.unique,a=this.props.on(n.event).on({"on-select-change":function(t){e.vm.changeTrueData(r,e.handler.toValue()),n.event["on-select-change"]&&n.event["on-select-change"](t)},"on-check-change":function(t){e.vm.changeTrueData(r,e.handler.toValue()),n.event["on-check-change"]&&n.event["on-check-change"](t)}}).props(n.props).ref(i).key("fip"+o).get(),s=this.inputProps().props({type:"text",value:this.handler.parseValue.toString(),disable:!0}).key("fipit"+o).style({display:"none"}).ref(i+"it").get();return[this.cvm.tree(a),this.cvm.input(s)]}});t.default={handler:c,render:d}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(27),o=i(r),a=n(7),s=i(a),u=n(0),l=function(){var e={};Object.keys(s.default).forEach(function(t){e[t]=(0,o.default)(t)}),e.number=e.inputnumber,e.time=e.timepicker,e.date=e.datepicker,e.color=e.colorpicker;var t=(0,o.default)("");return Object.assign(e,{hidden:function(){var e=(0,o.default)("hidden");return e.bind(e,"")}(),create:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"__mp"+(0,u.uniqueId)(),i=t("",n);return i.rule.type=e,i.col({labelWidth:"1px"}),i},createTmp:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"__mp"+(0,u.uniqueId)(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{labelWidth:"110px",span:24},a=t(r,i);return a.rule.type="__tmp",a.rule.template=e,a.rule._vm=n,a.col(o),a},number:e.inputnumber,time:e.timepicker,date:e.datepicker,color:e.colorpicker}),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.creator=void 0;var i=n(0),r=n(4),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(e){return function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new u(Object.assign(s(),{type:e,title:t,field:n,value:i}))}},s=function(){return{event:{},validate:[],options:[],col:{},children:[],emit:[],template:null}},u=function(e){o.default.call(this),this.rule=e,this.get=function(){return this._data},this.props({hidden:!1,visibility:!1})};u.prototype=o.default.prototype,u.constructor=u,["event","col"].forEach(function(e){u.prototype[e]=function(t){return this.rule[e]=Object.assign(this.rule[e],t),this}}),["validate","options","children","emit"].forEach(function(e){u.prototype[e]=function(t){return(0,i.isArray)(t)||(t=[t]),this.rule[e]=this.rule[e].concat(t),this}}),u.prototype.getRule=function(){return Object.assign(this.rule,this.get())},u.prototype.setValue=function(e){return this.rule.value=e,this},u.prototype.model=function(e,t){t||(t=this.rule.field),this.rule.model=function(n){e[t]=n}},t.default=a,t.creator=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=i(o),s=n(4),u=i(s),l=n(0),c=function(e){var t=e.vm,n=e.options,i=e.fieldList,r=e.handlers,o=e.formData,s=e.validate,c=e.fCreateApi;this.vm=t,this.options=n,this.handlers=r,this.renderSort=i,this.renders=this.renderSort.reduce(function(e,t){return e[t]=r[t].render,e},{}),this.form={model:o,rules:s,key:"form"+(0,l.uniqueId)()},this.fCreateApi=c,this.cvm=a.default.instance(t.$createElement),this.props=u.default.instance(),this.unique=(0,l.uniqueId)(),this.refName="cForm"+this.unique,this.rowGroup=[],this.layout=n.layout};c.prototype={parse:function(e){var t=this;if(a.default.setVm(e),e.isShow){var n=this.unique,i=this.props.props(Object.assign({},this.options.form,this.form)).ref(this.refName).class("form-create",!0).key(n).get(),r=this.renderSort.map(function(e){var i=t.renders[e],r=i.handler,o=r.key;if("hidden"!==r.type)return t.makeFormItem(i.handler,i.parse(),"fItem"+o+n)});return r.length>0&&r.push(this.makeFormBtn(n)),this.rowGroup.length=0,this.cvm.form(i,[this.cvm.row({props:this.options.row||{}},r)])}},makeRow:function(e){var t=this;if(this.layout){for(var n=[],i=0;i<this.layout.size;i++)n[i]=[],n[i].push(e.splice(0,this.layout.get(i+1)));n.map(function(e){t.rowGroup.push(t.cvm.row({props:t.options.row||{}},[].concat(r(e))))})}},makeFormItem:function(e,t){var n=e.rule,i=e.unique,r=e.field,o=this.props.props({prop:r,label:n.title,labelFor:i,rules:n.validate,"label-width":n.col.labelWidth,required:n.props.required}).key(i).get();return this.cvm.col({props:n.col,style:{display:!0===n.props.hidden?"none":"block",visibility:!0===n.props.visibility?"hidden":"visible"}},[this.cvm.formItem(o,t)])},makeFormBtn:function(e){var t=[],n=!1!==this.vm.buttonProps&&!1!==this.vm.buttonProps.show,i=!1!==this.vm.resetProps&&!1!==this.vm.resetProps.show;return n&&t.push(this.makeSubmitBtn(e,i?19:24)),i&&t.push(this.makeResetBtn(e,4)),this.cvm.col({props:{span:24}},t)},makeResetBtn:function(e,t){var n=this;return this.cvm.col({props:{span:t,push:1}},[this.cvm.button({key:"frsbtn"+e,props:this.vm.resetProps,on:{click:function(){n.fCreateApi.resetFields()}}},[this.cvm.span(this.vm.resetProps.innerText)])])},makeSubmitBtn:function(e,t){var n=this;return this.cvm.col({props:{span:t}},[this.cvm.button({key:"fbtn"+e,props:this.vm.buttonProps,on:{click:function(){n.fCreateApi.submit()}}},[this.cvm.span(this.vm.buttonProps.innerText)])])},removeRender:function(e){delete this.renders[e],this.renderSort.splice(this.renderSort.indexOf(e),1)},setRender:function(e,t,n){this.renders[e.field]=e.render,void 0!==t&&this.changeSort(e.field,t,n)},changeSort:function(e,t,n){var i=this.renderSort.indexOf(t.toString());-1!==i?this.renderSort.splice(!1===n?i+1:i,0,e):n?this.renderSort.unshift(e):this.renderSort.push(e)}},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=n(3),o=function(e){return{name:i.formCreateName+"Core",data:r.componentCommon.data,render:function(){return e.fRender.parse(e.vm)},methods:r.componentCommon.methods,created:function(){this.fComponent=e,this.fComponent._type="rules",e.init(this)},mounted:function(){e.mounted(this),this.$f=e.fCreateApi,this.init()}}};t.default=o}])});